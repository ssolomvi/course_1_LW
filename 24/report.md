# Отчет по лабораторной работе N 24 по курсу
# "Фундаментальная информатика"

Студентка группы: M8О-113Б, Соломатина Светлана Викторовна\
Контакты: ssolomvi@gmail.com\
Работа выполнена: 28.05.2022\
Преподаватель: Довженко Анастасия Александровна

## 1. Тема

Динамические структуры данных. Обработка деревьев.

## 2. Цель работы

Составить программу выполнения заданных преобразований арифметических выражений 
с применением деревьев.

## 3. Задание

Вариант 4. Упростить выражения, выполнив деления: 4\*a/2 -> 2\*a

## 4. Оборудование

Процессор: AMD Ryzen 5 4500U with Radeon Graphics 2.38 GHz\
ОП: 16384 Мб\
ОЗУ: 512 Гб\
Монитор: 1920x1080

## 5. Программное обеспечение

Операционная система семейства: **linux (ubuntu)**, версия **21.04**\
Интерпретатор команд: **bash**, версия **5.1.4**.\
Местонахождение и имена файлов программ и данных на домашнем компьютере: **/home/ssolomvi**

## 6. Идея, метод, алгоритм решения задачи

**Общий алгоритм:**
   Ищется главный оператор, относительно которого выражение разбивается на две
   части, рекурсивно вычисляемые этим же алгоритмом, и образующие левое и правое
   поддеревья.
   Главный оператор помещается в вершину дерева, а то, что по бокам -- в поддеревья.

**Поиск главного (образующего вершину) оператора:**
   Ищется последний оператор с наименьшим приоритетом. Если это степень, то из-за
   её правоассоциативности идём влево до самой первой степени в цепочке связанных
   степеней (вторая ^ в 1^2 + 2^3^4), которую и считаем главным оператором.

**Пример:**
\[2, +, 2, \*, 2]
Последний оператор с наименьшим приоритетом -- '+'. Заносим его в вершину и
разбиваем выражение относительно него на две части: \[2] и \[2, \*, 2], каждое из
которых вычисляем таким же образом. В первом first == last (0 == 0, это индекс
в массиве), поэтому это - число.
Получается дерево (+|-- правое поддерево; -|-- левое поддерево)
```
                       +|-- 2
        +|-- \*
                -|-- 2
+|-- +
        -|-- 2
   ```

**Задание варианта: упростить, выполнив деление (4\*a/2 -> 2/a, etc).**
Приводим дерево к упрощённому виду: удаляем лишние минусы
(функция transform.c: find_minus_operator) и раскладываем произведение
делителей, если оно есть (функция transform.c: check_if_mult).
    
Находим узел дерева, содержащий операнд деления. Рекурсивно выполняем
поиск делимого снизу вверх (функция transform.c: find_div), и, если оно 
найдено, трансформируем дерево (transform.c: div_transform): удаляем 
соответсвующий операнд деления и делитель, производим деление.
При этом обходе первая замена оказывается самой левой и самой нижней.

## 7. Сценарий выполнения работы

1. Изучить материалы лекции, дополнительные источиники
2. Разработать алгоритм для решения задачи варианта
3. Создать программу и провести тесты
4. Запротоколировать сеанс


|Тест 1|
```
Input expression:
4*a/2

+| -- right subtree, -| -- left subtree
Expression tree:
        +|-- 2
+|-- /
                +|-- a
        -|-- *
                -|-- 4

Semitransformed expression tree:
        +|-- a
+|-- *
        -|-- 2

Tree's infix linearization:
(2*a)
```

|Тест 2|
```
Input expression:
a*b*c*a^2/(a*c)

+| -- right subtree, -| -- left subtree
Expression tree:
                +|-- c
        +|-- *
                -|-- a
+|-- /
                        +|-- 2
                +|-- ^
                        -|-- a
        -|-- *
                        +|-- c
                -|-- *
                                +|-- b
                        -|-- *
                                -|-- a

Semitransformed expression tree:
                +|-- 2
        +|-- ^
                -|-- a
+|-- *
                +|-- 1
        -|-- *
                        +|-- b
                -|-- *
                        -|-- 1

Tree's infix linearization:
(((1*b)*1)*(a^2))
```

|Тест 3|
```
Input expression:
4*9/3-c*c*10/c/(-5)

+| -- right subtree, -| -- left subtree
Expression tree:
                        +|-- 5
                +|-- -
        +|-- /
                        +|-- c
                -|-- /
                                +|-- 10
                        -|-- *
                                        +|-- c
                                -|-- *
                                        -|-- c
+|-- -
                +|-- 3
        -|-- /
                        +|-- 9
                -|-- *
                        -|-- 4

Semitransformed expression tree:
                +|-- 2
        +|-- *
                        +|-- 1
                -|-- *
                        -|-- c
+|-- +
                +|-- 3
        -|-- *
                -|-- 4

Tree's infix linearization:
((4*3)+((c*1)*2))
```

|Тест 4|
```
Input expression:
a*c*b/(a*b*c)

+| -- right subtree, -| -- left subtree
Expression tree:
                +|-- c
        +|-- *
                        +|-- b
                -|-- *
                        -|-- a
+|-- /
                +|-- b
        -|-- *
                        +|-- c
                -|-- *
                        -|-- a

Semitransformed expression tree:
        +|-- 1
+|-- *
                +|-- 1
        -|-- *
                -|-- 1

Tree's infix linearization:
((1*1)*1)
```

|Тест 5|
```
Input expression:
a+(-b)*(-c)/(-a*b*c)

+| -- right subtree, -| -- left subtree
Expression tree:
                                +|-- c
                        +|-- *
                                        +|-- b
                                -|-- *
                                        -|-- a
                +|-- -
        +|-- /
                                +|-- c
                        +|-- -
                -|-- *
                                +|-- b
                        -|-- -
+|-- +
        -|-- a

Semitransformed expression tree:
                +|-- a
        +|-- /
                        +|-- 1
                -|-- *
                        -|-- 1
+|-- -
        -|-- a

Tree's infix linearization:
(a-((1*1)/a))
```

## 8. Распечатка протокола

Поскольку полный текст программы оказался довольно громоздким, он был вынесен в приложение (code).

## 9. Дневник отладки

| №  | Лаб. или дом. | Дата       | Время | Событие   | Действие по исправлению | Примечание          |
|----|---------------|------------|-------|-----------|-------------------------|---------------------|
| 0  | Дом.          | 28.05.2022 | 21:30 | --        | --                      | Всё прошло исправно |

## 10. Замечания автора по существу работы

Работа над преобразованием выражения в бинарное дерево выражений и реализация некоторых арифмитических свойств над выражением показались интересной задачей. 
Прилагаю надежду, что навыки, полученные при выполнении этой лабораторной работы ещё пригодятся.

## 11. Выводы

Выполняя эту лабораторную работу, я построила бинарное дерево выражений, манипулировала этой структурой, претворила некоторые арифмитические свойства в этом дереве выражений.
